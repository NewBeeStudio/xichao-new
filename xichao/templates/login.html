{% extends "layout_login.html" %}

{% block login_content %}
    {% from "test_formhelpers.html" import render_login, render_login_autologin %}
    <form id="login-form-block" method="post" action="/login" accept-charset="utf-8">
        <input name=_csrf_token type=hidden value="{{ csrf_token() }}">
        <!-- 跳转页面参数 -->
        {% if request_url %}
        <input name="request_url" type=hidden value="{{ request_url }}" />
        {% elif request.args.get('next') %}
        <input name="request_url" type=hidden value="{{ request.args.get('next') }}" />
        {% endif %}
        <dl>
            {{ render_login(form.email) }}
            {{ render_login(form.password) }}
            {{ render_login_autologin(form.stay) }}
        </dl>
        {% if error!=None %}
        <div class="error-tip login-error-not-match">
            {{ error }}
        </div>
        {% endif %}
        <div id="login-submit">
            <input type="submit" value="登陆">
            <div class="clear" style="margin-top: 10px;">
                <a class="login-yellow" href="{{url_for('register')}}">还没有账号？点击注册 >>></a>
            </div>
        </div>
    </form>
{% endblock %}