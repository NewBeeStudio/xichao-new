<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>js实现上传图片截取功能 ab蓝学网js特效在线演示</title>

    <link rel="stylesheet" type="text/css" href="css/jquery.imagecropper.css" />

    <script type="text/javascript" src="js/jquery-1.3.2.js"></script>

    <script type="text/javascript" src="js/ui.core.js"></script>

    <script type="text/javascript" src="js/ui.draggable.js"></script>

    <script type="text/javascript" src="js/jquery.imagecropper.js"></script>

    <script type="text/javascript">

        $(document).ready(function() {
            var imageCropper = $('#imgBackground').imageCropper({
                callbacks: {
                    dragging: updateStatus,
                    zoomed: updateStatus
                }
            });
            updateStatus();

            $('#btnCropImage').click(function() {
                $('#imgCroppedImage').attr('src', 'CropImage.ashx?p=' + imageCropper.settings.imagePath + '&z=' + imageCropper.settings.zoomLevel + '&t=' + imageCropper.settings.top + '&l=' + imageCropper.settings.left + '&w=' + imageCropper.settings.width + '&h=' + imageCropper.settings.height + '&' + Math.random());
                $('#imgCroppedImage').css('display', 'block');
            });

            $('#btnResetSettings').click(function() {
                imageCropper.settings.imagePath = $('#txtImgPath').val();
                imageCropper.settings.zoomLevel = parseFloat($('#txtZoomLevel').val());
                imageCropper.settings.left = parseInt($('#txtLeft').val());
                imageCropper.settings.top = parseInt($('#txtTop').val());
                imageCropper.settings.width = parseInt($('#txtWidth').val());
                imageCropper.settings.height = parseInt($('#txtHeight').val());
                imageCropper.reset();
            });

            function updateStatus() {
                $('#txtImgPath').val(imageCropper.settings.imagePath);
                $('#txtZoomLevel').val(imageCropper.settings.zoomLevel);
                $('#txtLeft').val(imageCropper.settings.left);
                $('#txtTop').val(imageCropper.settings.top);
                $('#txtWidth').val(imageCropper.settings.width);
                $('#txtHeight').val(imageCropper.settings.height);
            }
        });
    </script>

</head>
<body>
    <div style="float: left;">
        <img id="imgBackground" src="image/Hydrangeas.jpg" />
    </div>
    <div style="float: left; margin-left: 10px;">
        <div>
            <table>
                <tr>
                    <td>
                        image path:
                    </td>
                    <td>
                        <input type="text" value="" id="txtImgPath" />
                    </td>
                </tr>
                <tr>
                    <td>
                        zoom level:
                    </td>
                    <td>
                        <input type="text" value="" id="txtZoomLevel" />
                    </td>
                </tr>
                <tr>
                    <td>
                        left:
                    </td>
                    <td>
                        <input type="text" value="" id="txtLeft" />
                    </td>
                </tr>
                <tr>
                    <td>
                        top:
                    </td>
                    <td>
                        <input type="text" value="" id="txtTop" />
                    </td>
                </tr>
                <tr>
                    <td>
                        width:
                    </td>
                    <td>
                        <input type="text" value="" id="txtWidth" />
                    </td>
                </tr>
                <tr>
                    <td>
                        height:
                    </td>
                    <td>
                        <input type="text" value="" id="txtHeight" />
                    </td>
                </tr>
            </table>
        </div>
        <div>
            <input type="button" value="Reset Settings" id="btnResetSettings" />
            <input type="button" value="Crop Image" id="btnCropImage" />
            <img id="imgCroppedImage" src="" style="display: none;" />
        </div>
    </div>
	<div style="clear:both"></div>
	<div><a href="http://www.ablanxue.com">http://www.ablanxue.com</a>js实现上传图片截取功能 ab蓝学网js特效在线演示 </div>
</body>
</html>
